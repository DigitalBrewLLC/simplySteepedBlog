---
import TitlePage from 'src/components/BlogTemplates/TitlePage.astro'
import ListPosts from 'src/components/ListPosts.astro'
import BaseLayout from 'src/layouts/BaseLayout.astro'
import { getTags, getPostByTag } from 'src/utils'

export async function getStaticPaths() {
	const tags = await getTags()

	return tags.map((tag) => ({
		params: { tag },
		props: { tag }
	}))
}

const { tag } = Astro.props

const posts = await getPostByTag(tag as string)
---

<BaseLayout title={tag}>
	<TitlePage title={tag as string} />
	<ListPosts posts={posts} />
</BaseLayout>
